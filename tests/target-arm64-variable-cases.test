@test("It should generate target arm64 code when returning variable with a constant")
@given("file")
int main() {
    int x;
    x = 10;
    return x;
}
@whenRun("./bin/target-code-generator-tester")
@expectOutput("stdout")
.text
.global _main
.align 2

_main:
    stp x29, x30, [sp, -16]!
    mov x29, sp
    sub sp, sp, #16
    mov w9, #10
    str w9, [sp, #0]
    ldr w9, [sp, #0]
    mov w0, w9
    add sp, sp, #16
    ldp x29, x30, [sp], #16
    ret

@endtest

@test("It should generate target arm64 code when returning a variable with an expression")
@given("file")
int main() {
    int x;
    x = 7 * 8;
    return x / 2;
}
@whenRun("./bin/target-code-generator-tester")
@expectOutput("stdout")
.text
.global _main
.align 2

_main:
    stp x29, x30, [sp, -16]!
    mov x29, sp
    sub sp, sp, #16
    mov w9, #7
    mov w10, #8
    mul w11, w9, w10
    str w11, [sp, #0]
    ldr w9, [sp, #0]
    mov w10, #2
    sdiv w11, w9, w10
    mov w0, w11
    add sp, sp, #16
    ldp x29, x30, [sp], #16
    ret

@endtest
